2023/02/21

Upgrading HTCondor and other OSG packages on nsgosg.sdsc.edu.

[mkandes@nsgosg ~]$ condor_q --version
$CondorVersion: 9.0.17 Oct 04 2022 PackageID: 9.0.17-1.1 $
$CondorPlatform: X86_64-Rocky_8.6 $

[mkandes@nsgosg ~]$ yum repolist enabled
repo id                                                            repo name
SDSC-AppStream                                                     Rocky Linux 8 AppStream
SDSC-BaseOS                                                        Rocky Linux 8 BaseOS
SDSC-extras                                                        Rocky Linux 8 extras
duosecurity                                                        Duo Security Repository
epel                                                               Extra Packages for Enterprise Linux 8 - x86_64
osg                                                                OSG Software for Enterprise Linux 8 - x86_64
[mkandes@nsgosg ~]$

[mkandes@nsgosg ~]$ yum info osg-release
Rocky Linux 8 AppStream                          80 MB/s | 9.7 MB     00:00    
Rocky Linux 8 BaseOS                             61 MB/s | 3.7 MB     00:00    
Rocky Linux 8 extras                            377 kB/s |  12 kB     00:00    
OSG Software for Enterprise Linux 8 - x86_64    1.6 MB/s | 1.7 MB     00:01    
Duo Security Repository                          32 kB/s | 2.0 kB     00:00    
Extra Packages for Enterprise Linux 8 - x86_64   16 MB/s |  13 MB     00:00    
Installed Packages
Name         : osg-release
Version      : 3.6
Release      : 11.osg36.el8
Architecture : noarch
Size         : 15 k
Source       : osg-release-3.6-11.osg36.el8.src.rpm
Repository   : @System
From repo    : osg
Summary      : OSG Software for Enterprise Linux repository configuration
URL          : https://repo.opensciencegrid.org/
License      : GPL
Description  : This package contains the OSG Software for Enterprise Linux
             : repository configuration for yum.

[mkandes@nsgosg ~]$

[mkandes@nsgosg ~]$ sudo yum clean all --enablerepo=*
[sudo] password for mkandes: 
Duo two-factor login for mkandes

Enter a passcode or select one of the following options:

 1. Duo Push to XXX-XXX-7242
 2. SMS passcodes to XXX-XXX-7242

Passcode or option (1-2): 1

Please open Duo Mobile and check for Duo Push requests manually.
Please open Duo Mobile and check for Duo Push requests manually.
Success. Logging you in...
44 files removed
[mkandes@nsgosg ~]$

[mkandes@nsgosg ~]$ cat /etc/dnf/automatic.conf
upgrade_type = security
[mkandes@nsgosg ~]$

[mkandes@nsgosg ~]$ condor_config_val -summary > saved_condor_config_before_upgrade.20230221
[mkandes@nsgosg ~]$

[mkandes@nsgosg ~]$ yum-config-manager --enable powertools
Error: This command has to be run with superuser privileges (under the root user on most systems).
[mkandes@nsgosg ~]$ sudo yum-config-manager --enable powertools
[sudo] password for mkandes: 
Sorry, try again.
[sudo] password for mkandes: 
Duo two-factor login for mkandes

Enter a passcode or select one of the following options:

 1. Duo Push to XXX-XXX-7242
 2. SMS passcodes to XXX-XXX-7242

Passcode or option (1-2): 1

Please open Duo Mobile and check for Duo Push requests manually.
Success. Logging you in...
[mkandes@nsgosg ~]$ yum repolist enabled
repo id                 repo name
SDSC-AppStream          Rocky Linux 8 AppStream
SDSC-BaseOS             Rocky Linux 8 BaseOS
SDSC-extras             Rocky Linux 8 extras
duosecurity             Duo Security Repository
epel                    Extra Packages for Enterprise Linux 8 - x86_64
osg                     OSG Software for Enterprise Linux 8 - x86_64
powertools              Rocky Linux 8 - PowerTools
[mkandes@nsgosg ~]$

[mkandes@nsgosg ~]$ sudo systemctl stop condor
[sudo] password for mkandes: 
Duo two-factor login for mkandes

Enter a passcode or select one of the following options:

 1. Duo Push to XXX-XXX-7242
 2. SMS passcodes to XXX-XXX-7242

Passcode or option (1-2): 1

Please open Duo Mobile and check for Duo Push requests manually.
Success. Logging you in...
[mkandes@nsgosg ~]$ systemctl status condor
● condor.service - Condor Distributed High-Throughput-Computing
   Loaded: loaded (/usr/lib/systemd/system/condor.service; enabled; vendor pres>
  Drop-In: /usr/lib/systemd/system/condor.service.d
           └─osg-env.conf
   Active: inactive (dead) since Tue 2023-02-21 11:35:51 PST; 16s ago
  Process: 1356 ExecStart=/usr/sbin/condor_master -f (code=exited, status=0/SUC>
 Main PID: 1356 (code=exited, status=0/SUCCESS)
   Status: "All daemons are responding"
[mkandes@nsgosg ~]$
